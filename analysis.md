è¿™æ˜¯ä¸€ä¸ªå¾ˆå®é™…çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¾ˆå¤§çš„æ–‡ä»¶ã€‚æˆ‘éœ€è¦ç»™å‡ºå‡ ä¸ªè§£å†³æ–¹æ¡ˆï¼š

  1. ä½¿ç”¨grepå·¥å…·æœç´¢ç‰¹å®šå†…å®¹è€Œä¸æ˜¯è¯»å–æ•´ä¸ªæ–‡ä»¶
  2. ä½¿ç”¨head/tailæŸ¥çœ‹æ–‡ä»¶å¼€å¤´/ç»“å°¾
  3. ä½¿ç”¨wcç­‰å·¥å…·å…ˆäº†è§£æ–‡ä»¶å¤§å°å’Œç»“æ„
  4. ä½¿ç”¨ä¸“é—¨çš„ä»£ç åˆ†æå·¥å…·
  5. å‘Šè¯‰ç”¨æˆ·æ¨¡å‹çš„èƒ½åŠ›é™åˆ¶ï¼Œå»ºè®®æ›´ç²¾ç¡®çš„è¯»å–ç­–ç•¥

  è®©æˆ‘ç»™å‡ºå®ç”¨çš„å»ºè®®ã€‚


  å¯¹äºå¤§æ–‡ä»¶è¯»å–é—®é¢˜ï¼Œæˆ‘æœ‰å‡ ä¸ªå»ºè®®çš„è§£å†³æ–¹æ¡ˆï¼š

  1. ä½¿ç”¨æœç´¢å·¥å…·ç²¾ç¡®å®šä½å†…å®¹

  å¦‚æœä¸çŸ¥é“å…·ä½“è¦çœ‹ä»€ä¹ˆå†…å®¹ï¼š

âº Bash(wc -l /Users/change/projects/rtl_demo)
  â¿ Â Error: Exit code 1
     wc: /Users/change/projects/rtl_demo: read: Is a directory

âº

âº Bash(find /Users/change/projects/rtl_demo -type f -name "*.v" -o -name "*.sv" -o -name "*.vh" | head -10)
  â¿ Â /Users/change/projects/rtl_demo/ct_lsu_pfu.v          
     /Users/change/projects/rtl_demo/ct_lsu_pfu_optimized.v

âº

âº Bash(ls -lah /Users/change/projects/rtl_demo/*.v)
  â¿ Â -rw-r--r--  1 change  staff    55K 11æœˆ 14 23:55 /Users/change/projects/rtl_demo/ct_lsu_pfu_optimized.v
     -rw-r--r--@ 1 change  staff   137K 11æœˆ 14 20:28 /Users/change/projects/rtl_demo/ct_lsu_pfu.v

âº ç°åœ¨æˆ‘å¯ä»¥ç»™ç”¨æˆ·æä¾›å…·ä½“çš„å»ºè®®ã€‚å¯¹äº137KBçš„æ–‡ä»¶ï¼Œæ¨¡å‹å¯èƒ½æ— æ³•ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹ã€‚


  å¤§æ–‡ä»¶å¤„ç†ç­–ç•¥

  å¯¹äºä½ çš„RTLæ–‡ä»¶ï¼Œæˆ‘çœ‹åˆ°æœ‰ï¼š
  - ct_lsu_pfu.v (137KB) - è¾ƒå¤§æ–‡ä»¶
  - ct_lsu_pfu_optimized.v (55KB) - ç›¸å¯¹è¾ƒå°

  å»ºè®®çš„å¤„ç†æ–¹æ³•ï¼š

  1. å…ˆäº†è§£æ–‡ä»¶ç»“æ„

âº Bash(head -20 /Users/change/projects/rtl_demo/ct_lsu_pfu.v)
  â¿ Â /*Copyright 2019-2021 T-Head Semiconductor Co., Ltd.           

     Licensed under the Apache License, Version 2.0 (the "License");
     â€¦ +17 lines (ctrl+o to expand)

âº è®©æˆ‘æ£€æŸ¥æ–‡ä»¶çš„è¡Œæ•°ï¼Œç„¶åç»™å‡ºå…·ä½“çš„å¤„ç†å»ºè®®ã€‚

âº Bash(wc -l /Users/change/projects/rtl_demo/ct_lsu_pfu.v)
  â¿ Â     2385 /Users/change/projects/rtl_demo/ct_lsu_pfu.v

âº 2. æŒ‰æ¨¡å—/åŠŸèƒ½åˆ†æ®µè¯»å–

âº Search(pattern: "^(module|endmodule|always|assign|input|output|wire|reg)", path: "ct_lsu_pfu.v", output_mode: "content", head_limit: 50)
  â¿ Â Found 50 lines (ctrl+o to expand)

âº ğŸ“‹ å¤§æ–‡ä»¶å¤„ç†å®Œæ•´è§£å†³æ–¹æ¡ˆ

  é—®é¢˜åˆ†æ

  - æ–‡ä»¶å¤§å°ï¼š137KBï¼Œ2385è¡Œ
  - æ¨¡å‹é™åˆ¶ï¼šæ— æ³•ä¸€æ¬¡æ€§è¯»å–å…¨éƒ¨å†…å®¹
  - é£é™©ï¼šåˆ†æ‰¹è¯»å–å¯èƒ½ä¸¢å¤±ä¸Šä¸‹æ–‡ä¿¡æ¯

  âœ… æœ€ä½³å¤„ç†ç­–ç•¥

  1. å…ˆè·å–æ–‡ä»¶æ¦‚è§ˆ
  # æŸ¥çœ‹æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯
  wc -l /Users/change/projects/rtl_demo/ct_lsu_pfu.v    # æ€»è¡Œæ•°
  head -50 /Users/change/projects/rtl_demo/ct_lsu_pfu.v  # å¼€å¤´å†…å®¹  
  tail -50 /Users/change/projects/rtl_demo/ct_lsu_pfu.v  # ç»“å°¾å†…å®¹

  2. ä½¿ç”¨Grepå·¥å…·è¿›è¡Œç²¾ç¡®æœç´¢
  # æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½æ¨¡å—
  grep -n "module\|always\|assign" /Users/change/projects/rtl_demo/ct_lsu_pfu.v
  # æŸ¥æ‰¾è¾“å…¥è¾“å‡ºç«¯å£
  grep -n "input\|output" /Users/change/projects/rtl_demo/ct_lsu_pfu.v
  # æŸ¥æ‰¾ç‰¹å®šä¿¡å·
  grep -n "pfu\|cache\|pref" /Users/change/projects/rtl_demo/ct_lsu_pfu.v

  3. åˆ†æ®µè¯»å–å…³é”®éƒ¨åˆ†

âº Read(ct_lsu_pfu.v)
  â¿ Â Read 100 lines

âº ğŸ¯ æ™ºèƒ½åˆ†æ®µè¯»å–ç­–ç•¥

  4. æŸ¥æ‰¾å…³é”®ä»£ç æ®µä½ç½®

âº Bash(grep -n "always\|assign\|parameter\|localparam" /Users/change/projects/rtl_demo/ct_lsu_pfu.v | head -20)
  â¿ Â 552:parameter PMB_ENTRY = 8,          
     555:parameter PC_LEN    = 15;
     556:parameter BIU_R_L2PREF_ID = 5'd25;
     â€¦ +17 lines (ctrl+o to expand)

âº ğŸ† æ¨èçš„å¤„ç†æ–¹æ¡ˆ

  æ ¸å¿ƒç­–ç•¥ï¼šé¿å…ä¿¡æ¯ä¸¢å¤±çš„æ™ºèƒ½è¯»å–æ–¹æ³•

  1. ğŸ“Š æ–‡ä»¶åˆ†æé˜¶æ®µ
    - ä½¿ç”¨ wc -l äº†è§£æ€»è¡Œæ•°
    - ç”¨ head/tail æŸ¥çœ‹æ–‡ä»¶ç»“æ„
    - ç”¨ grep å®šä½å…³é”®å†…å®¹ä½ç½®
  2. ğŸ” ç²¾ç¡®å®šä½é˜¶æ®µ
    - æœç´¢ç‰¹å®šå‡½æ•°/æ¨¡å—/ä¿¡å·
    - æŒ‰åŠŸèƒ½æ¨¡å—åˆ†æ®µè¯»å–
    - ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§
  3. ğŸ“– æ™ºèƒ½åˆ†æ®µé˜¶æ®µ
    - æ¯æ¬¡è¯»å–200-500è¡Œ
    - ä»å¤´åˆ°å°¾é¡ºåºè¯»å–
    - è®°å½•å·²è¯»å–ä½ç½®é¿å…é‡å¤

  4. ä½¿ç”¨ä»£ç åˆ†æå·¥å…·

âº Explore(ä»£ç ç»“æ„åˆ†æ)
  â¿ Â Done (12 tool uses Â· 0 tokens Â· 1m 4s)                                                                                                                                                                                                                                                                                                                          

âº æˆ‘åº”è¯¥æ€»ç»“ä¸€ä¸‹ä¸»è¦çš„è§£å†³æ–¹æ¡ˆï¼Œç»™ç”¨æˆ·ä¸€ä¸ªæ¸…æ™°çš„è¡ŒåŠ¨æŒ‡å—ã€‚


  ğŸ’¡ æ€»ç»“ï¼šå¤§æ–‡ä»¶å¤„ç†çš„æœ€ä½³å®è·µ

  é’ˆå¯¹ä½ çš„æƒ…å†µï¼Œæˆ‘æ¨èåˆ†å±‚é€’è¿›çš„å¤„ç†ç­–ç•¥ï¼š

  ğŸ¯ æ ¸å¿ƒç­–ç•¥ï¼šç»“æ„åŒ–åˆ†æ + åˆ†æ®µè¯»å–

  ç¬¬ä¸€æ­¥ï¼šè·å–æ–‡ä»¶æ¦‚è§ˆï¼ˆå·²å®Œæˆï¼‰

  - æ–‡ä»¶å¤§å°ï¼š137KBï¼Œ2385è¡ŒVerilogä»£ç 
  - æ€§è´¨ï¼šé¢„å–å•å…ƒ(PFU)çš„RTLå®ç°
  - æ¶æ„ï¼šPMBâ†’SDBâ†’PFB ä¸‰çº§é¢„å–æ¶æ„

  ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ç²¾ç¡®æœç´¢å®šä½å…³é”®å†…å®¹

  # æŒ‰åŠŸèƒ½æ¨¡å—æœç´¢
  grep -n "PMB\|SDB\|PFB\|always\|assign" /path/to/file.v
  # æŸ¥æ‰¾ç‰¹å®šåŠŸèƒ½
  grep -n "pref\|cache\|hit\|create" /path/to/file.v

  ç¬¬ä¸‰æ­¥ï¼šæŒ‰ä»£ç ç»“æ„åˆ†æ®µè¯»å–

  åŸºäºåˆ†æï¼Œæ–‡ä»¶å¯åˆ†ä¸º6ä¸ªåŠŸèƒ½åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸ400-500è¡Œï¼š
  1. æ¥å£å®šä¹‰ (1-600è¡Œ) - æ¨¡å—ç«¯å£å’Œå‚æ•°
  2. PMBé€»è¾‘ (601-1000è¡Œ) - é¡µåŒ¹é…ç¼“å†²åŒº
  3. SDBé€»è¾‘ (1001-1600è¡Œ) - æ­¥å¹…æ£€æµ‹ç¼“å†²åŒº
  4. PFBé€»è¾‘ (1601-1900è¡Œ) - é¢„å–ç¼“å†²åŒº
  5. MMUæ¥å£ (1901-2100è¡Œ) - åœ°å€è½¬æ¢
  6. BIUæ¥å£ (2101-2383è¡Œ) - æ€»çº¿æ¥å£

  ç¬¬å››æ­¥ï¼šä½¿ç”¨Readå·¥å…·åˆ†æ®µè¯»å–

  # æ¯æ¬¡è¯»å–400-500è¡Œï¼Œä¿æŒä¸Šä¸‹æ–‡è¿è´¯
  Read(offset=1, limit=500)     # æ¥å£å®šä¹‰
  Read(offset=501, limit=500)   # PMBé€»è¾‘
  Read(offset=1001, limit=500)  # SDBé€»è¾‘
  # ... ç»§ç»­åˆ†æ®µ

  âœ… ä¼˜åŠ¿

  1. ä¿¡æ¯å®Œæ•´æ€§ - ä¿æŒåŠŸèƒ½æ¨¡å—çš„å®Œæ•´æ€§
  2. ä¸Šä¸‹æ–‡è¿è´¯ - æ¯æ¬¡è¯»å–ä¿æŒä»£ç é€»è¾‘è¿è´¯
  3. æ•ˆç‡é«˜ - é¿å…ç›²ç›®æœç´¢å’Œé‡å¤è¯»å–
  4. ç»“æ„åŒ– - æŒ‰é€»è¾‘åŠŸèƒ½ç»„ç»‡ï¼Œä¾¿äºç†è§£

  è¿™æ ·çš„ç­–ç•¥æ—¢é¿å…äº†æ¨¡å‹çª—å£é™åˆ¶ï¼Œåˆä¿è¯äº†ä¿¡æ¯çš„å®Œæ•´æ€§å’Œè¿è´¯æ€§ã€‚ä½ æƒ³è¦æˆ‘å¸®ä½ è¯»å–å“ªä¸ªå…·ä½“éƒ¨åˆ†å—ï¼Ÿ